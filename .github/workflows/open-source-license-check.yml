name: open-source-license-check

on:
  push:
    branches:    
      - main

jobs:
  open-source-license-check-backend:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./backend
    steps:
      - uses: actions/checkout@v3
      - run: pip install pipenv
      # note that we use the system python for installing at the moment
      - run: pipenv install --system
      # we had previously used gem install license_finder --user-install
      # to avoid the error error: You don't have write permissions for the /var/lib/gems/3.0.0 directory.
      # but this resulted in the error: line 1: license_finder: command not found
      - run: sudo gem install license_finder
      - run: license_finder
